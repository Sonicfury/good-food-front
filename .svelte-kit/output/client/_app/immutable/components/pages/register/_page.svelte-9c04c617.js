import{S as je,i as Be,s as Je,k as c,q as M,a as P,l as d,m as N,r as O,h as m,c as A,n as r,L as z,b as te,E as i,M as F,N as ae,O as Ue,f as re,t as ge,d as ze,P as Fe,u as ie,w as Ce,x as He,y as Re,z as Ze,g as Ge}from"../../../chunks/index-3eda13d0.js";import{c as Ke,a as se,A as Qe}from"../../../chunks/object-e6515e57.js";import{g as We}from"../../../chunks/navigation-be7ef09a.js";import{w as Xe}from"../../../chunks/singletons-26ce41b3.js";let Ee;Ee=window.localStorage.getItem("session");const Ye=Xe(Ee?JSON.parse(Ee):null);Ye.subscribe(n=>window.localStorage.setItem("session",JSON.stringify(n)));function Me(n){var f;let a,l=((f=n[4])==null?void 0:f.firstName)+"",t;return{c(){a=c("span"),t=M(l),this.h()},l(e){a=d(e,"SPAN",{class:!0});var s=N(a);t=O(s,l),s.forEach(m),this.h()},h(){r(a,"class","label-text-alt text-error ")},m(e,s){te(e,a,s),i(a,t)},p(e,s){var p;s&16&&l!==(l=((p=e[4])==null?void 0:p.firstName)+"")&&ie(t,l)},d(e){e&&m(a)}}}function Oe(n){var f;let a,l=((f=n[4])==null?void 0:f.lastName)+"",t;return{c(){a=c("span"),t=M(l),this.h()},l(e){a=d(e,"SPAN",{class:!0});var s=N(a);t=O(s,l),s.forEach(m),this.h()},h(){r(a,"class","label-text-alt text-error")},m(e,s){te(e,a,s),i(a,t)},p(e,s){var p;s&16&&l!==(l=((p=e[4])==null?void 0:p.lastName)+"")&&ie(t,l)},d(e){e&&m(a)}}}function Te(n){var f;let a,l=((f=n[4])==null?void 0:f.email)+"",t;return{c(){a=c("span"),t=M(l),this.h()},l(e){a=d(e,"SPAN",{class:!0});var s=N(a);t=O(s,l),s.forEach(m),this.h()},h(){r(a,"class","label-text-alt text-error")},m(e,s){te(e,a,s),i(a,t)},p(e,s){var p;s&16&&l!==(l=((p=e[4])==null?void 0:p.email)+"")&&ie(t,l)},d(e){e&&m(a)}}}function Ve(n){var f;let a,l=((f=n[4])==null?void 0:f.password)+"",t;return{c(){a=c("span"),t=M(l),this.h()},l(e){a=d(e,"SPAN",{class:!0});var s=N(a);t=O(s,l),s.forEach(m),this.h()},h(){r(a,"class","label-text-alt text-error w-72")},m(e,s){te(e,a,s),i(a,t)},p(e,s){var p;s&16&&l!==(l=((p=e[4])==null?void 0:p.password)+"")&&ie(t,l)},d(e){e&&m(a)}}}function De(n){let a,l;return a=new Qe({props:{level:n[2],message:n[1]}}),{c(){Ce(a.$$.fragment)},l(t){He(a.$$.fragment,t)},m(t,f){Re(a,t,f),l=!0},p(t,f){const e={};f&4&&(e.level=t[2]),f&2&&(e.message=t[1]),a.$set(e)},i(t){l||(re(a.$$.fragment,t),l=!0)},o(t){ge(a.$$.fragment,t),l=!1},d(t){Ze(a,t)}}}function $e(n){var Pe,Ae,ke,ye;let a,l,t,f,e,s,p,C,W,v,X,Y,I,T,K,B,b,ne,oe,q,H,ue,fe,k,me,pe,L,R,ce,de,y,he,_e,le,Z,be,Ne,G,ve,J,we,Se,w=((Pe=n[4])==null?void 0:Pe.firstName)&&Me(n),g=((Ae=n[4])==null?void 0:Ae.lastName)&&Oe(n),E=((ke=n[4])==null?void 0:ke.email)&&Te(n),S=((ye=n[4])==null?void 0:ye.password)&&Ve(n),h=n[3]&&De(n);return{c(){a=c("div"),l=c("h1"),t=M("S'inscrire"),f=P(),e=c("form"),s=c("div"),p=c("label"),C=M("Pr\xE9nom"),W=P(),v=c("input"),X=P(),w&&w.c(),Y=P(),I=c("div"),T=c("label"),K=M("Nom"),B=P(),b=c("input"),ne=P(),g&&g.c(),oe=P(),q=c("div"),H=c("label"),ue=M("Email"),fe=P(),k=c("input"),me=P(),E&&E.c(),pe=P(),L=c("div"),R=c("label"),ce=M("Mot de passe"),de=P(),y=c("input"),he=P(),S&&S.c(),_e=P(),h&&h.c(),le=P(),Z=c("button"),be=M("Valider"),Ne=P(),G=c("a"),ve=M("J'ai d\xE9j\xE0 un compte !"),this.h()},l(o){a=d(o,"DIV",{class:!0});var u=N(a);l=d(u,"H1",{class:!0});var U=N(l);t=O(U,"S'inscrire"),U.forEach(m),f=A(u),e=d(u,"FORM",{class:!0});var _=N(e);s=d(_,"DIV",{class:!0});var V=N(s);p=d(V,"LABEL",{class:!0,for:!0});var $=N(p);C=O($,"Pr\xE9nom"),$.forEach(m),W=A(V),v=d(V,"INPUT",{type:!0,name:!0,id:!0,placeholder:!0,class:!0}),X=A(V),w&&w.l(V),V.forEach(m),Y=A(_),I=d(_,"DIV",{class:!0});var D=N(I);T=d(D,"LABEL",{class:!0,for:!0});var x=N(T);K=O(x,"Nom"),x.forEach(m),B=A(D),b=d(D,"INPUT",{type:!0,name:!0,id:!0,placeholder:!0,class:!0}),ne=A(D),g&&g.l(D),D.forEach(m),oe=A(_),q=d(_,"DIV",{class:!0});var j=N(q);H=d(j,"LABEL",{class:!0,for:!0});var ee=N(H);ue=O(ee,"Email"),ee.forEach(m),fe=A(j),k=d(j,"INPUT",{type:!0,id:!0,name:!0,placeholder:!0,class:!0}),me=A(j),E&&E.l(j),j.forEach(m),pe=A(_),L=d(_,"DIV",{class:!0});var Q=N(L);R=d(Q,"LABEL",{class:!0,for:!0});var Ie=N(R);ce=O(Ie,"Mot de passe"),Ie.forEach(m),de=A(Q),y=d(Q,"INPUT",{type:!0,id:!0,name:!0,placeholder:!0,class:!0}),he=A(Q),S&&S.l(Q),Q.forEach(m),_e=A(_),h&&h.l(_),le=A(_),Z=d(_,"BUTTON",{type:!0,class:!0});var qe=N(Z);be=O(qe,"Valider"),qe.forEach(m),Ne=A(_),G=d(_,"A",{href:!0,class:!0});var Le=N(G);ve=O(Le,"J'ai d\xE9j\xE0 un compte !"),Le.forEach(m),_.forEach(m),u.forEach(m),this.h()},h(){var o,u,U,_;r(l,"class","text-6xl text-primary"),r(p,"class","label"),r(p,"for","firstName"),r(v,"type","text"),r(v,"name","firstName"),r(v,"id","firstName"),r(v,"placeholder","Pr\xE9nom"),r(v,"class","input bg-neutral w-72 max-w-xs"),z(v,"input-error",(o=n[4])==null?void 0:o.firstName),r(s,"class","form-control"),r(T,"class","label"),r(T,"for","lastName"),r(b,"type","text"),r(b,"name","lastName"),r(b,"id","lastName"),r(b,"placeholder","Nom de famille"),r(b,"class","input bg-neutral w-72 max-w-xs"),z(b,"input-error",(u=n[4])==null?void 0:u.lastName),r(I,"class","form-control"),r(H,"class","label"),r(H,"for","email"),r(k,"type","email"),r(k,"id","email"),r(k,"name","email"),r(k,"placeholder","you@domain.com"),r(k,"class","input bg-neutral w-72 max-w-xs"),z(k,"input-error",(U=n[4])==null?void 0:U.email),r(q,"class","form-control"),r(R,"class","label"),r(R,"for","password"),r(y,"type","password"),r(y,"id","password"),r(y,"name","password"),r(y,"placeholder","Mot de passe"),r(y,"class","input bg-neutral w-72 max-w-xs"),z(y,"input-error",(_=n[4])==null?void 0:_.password),r(L,"class","form-control"),r(Z,"type","submit"),r(Z,"class","btn btn-primary text-base-100 w-32"),r(G,"href","/login"),r(G,"class","text-primary mt-5 cursor-pointer"),r(e,"class","flex items-center flex-col gap-8"),r(a,"class","flex items-center flex-col mt-12 gap-8")},m(o,u){te(o,a,u),i(a,l),i(l,t),i(a,f),i(a,e),i(e,s),i(s,p),i(p,C),i(s,W),i(s,v),F(v,n[0].firstName),i(s,X),w&&w.m(s,null),i(e,Y),i(e,I),i(I,T),i(T,K),i(I,B),i(I,b),F(b,n[0].lastName),i(I,ne),g&&g.m(I,null),i(e,oe),i(e,q),i(q,H),i(H,ue),i(q,fe),i(q,k),F(k,n[0].email),i(q,me),E&&E.m(q,null),i(e,pe),i(e,L),i(L,R),i(R,ce),i(L,de),i(L,y),F(y,n[0].password),i(L,he),S&&S.m(L,null),i(e,_e),h&&h.m(e,null),i(e,le),i(e,Z),i(Z,be),i(e,Ne),i(e,G),i(G,ve),J=!0,we||(Se=[ae(v,"input",n[6]),ae(b,"input",n[7]),ae(k,"input",n[8]),ae(y,"input",n[9]),ae(e,"submit",Ue(n[5]))],we=!0)},p(o,[u]){var U,_,V,$,D,x,j,ee;u&1&&v.value!==o[0].firstName&&F(v,o[0].firstName),(!J||u&16)&&z(v,"input-error",(U=o[4])==null?void 0:U.firstName),(_=o[4])!=null&&_.firstName?w?w.p(o,u):(w=Me(o),w.c(),w.m(s,null)):w&&(w.d(1),w=null),u&1&&b.value!==o[0].lastName&&F(b,o[0].lastName),(!J||u&16)&&z(b,"input-error",(V=o[4])==null?void 0:V.lastName),($=o[4])!=null&&$.lastName?g?g.p(o,u):(g=Oe(o),g.c(),g.m(I,null)):g&&(g.d(1),g=null),u&1&&k.value!==o[0].email&&F(k,o[0].email),(!J||u&16)&&z(k,"input-error",(D=o[4])==null?void 0:D.email),(x=o[4])!=null&&x.email?E?E.p(o,u):(E=Te(o),E.c(),E.m(q,null)):E&&(E.d(1),E=null),u&1&&y.value!==o[0].password&&F(y,o[0].password),(!J||u&16)&&z(y,"input-error",(j=o[4])==null?void 0:j.password),(ee=o[4])!=null&&ee.password?S?S.p(o,u):(S=Ve(o),S.c(),S.m(L,null)):S&&(S.d(1),S=null),o[3]?h?(h.p(o,u),u&8&&re(h,1)):(h=De(o),h.c(),re(h,1),h.m(e,le)):h&&(Ge(),ge(h,1,1,()=>{h=null}),ze())},i(o){J||(re(h),J=!0)},o(o){ge(h),J=!1},d(o){o&&m(a),w&&w.d(),g&&g.d(),E&&E.d(),S&&S.d(),h&&h.d(),we=!1,Fe(Se)}}}function xe(n,a,l){let t={email:"",password:"",firstName:"",lastName:""},f="",e="error",s=!1;const p=Ke().shape({email:se().required(" Email requis").email("Email invalide"),password:se().required("Mot de passe requis").matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\$%\^&\*])(?=.{8,})/,"Doit contenir 8 caract\xE8res, une majuscule, une minuscule, un chiffre et un caract\xE8re sp\xE9cial"),firstName:se().required(" Pr\xE9nom requis"),lastName:se().required("Nom requis")});let C={};const W=async()=>{try{await p.validate(t,{abortEarly:!1}),await v(),l(4,C={})}catch(K){l(4,C=K.inner.reduce((B,b)=>({...B,[b.path]:b.message}),{}))}};async function v(){l(3,s=!1);const B=await(await fetch("api/user",{method:"POST",body:JSON.stringify(t),headers:{"content-type":"application/json"}})).json();if(B.data){await We("/");return}l(3,s=!0),l(2,e="error"),l(1,f=B.message)}function X(){t.firstName=this.value,l(0,t)}function Y(){t.lastName=this.value,l(0,t)}function I(){t.email=this.value,l(0,t)}function T(){t.password=this.value,l(0,t)}return[t,f,e,s,C,W,X,Y,I,T]}class sa extends je{constructor(a){super(),Be(this,a,xe,$e,Je,{})}}export{sa as default};
