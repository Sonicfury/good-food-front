import{S as he,i as _e,s as be,k as c,a as N,q as j,l as p,m as b,c as T,r as O,h as m,n as r,L as Q,b as le,E as s,M as X,N as re,O as Me,f as ae,g as we,t as ne,d as Se,P as Ae,o as Ie,w as ve,x as Ee,y as ge,z as ye,u as ie,B as Pe}from"../../../chunks/index-3eda13d0.js";import{c as Le,a as oe,A as Ne}from"../../../chunks/object-e6515e57.js";function fe(u){let e,t;return e=new Ne({props:{level:u[2],message:u[0]}}),{c(){ve(e.$$.fragment)},l(a){Ee(e.$$.fragment,a)},m(a,i){ge(e,a,i),t=!0},p(a,i){const l={};i&4&&(l.level=a[2]),i&1&&(l.message=a[0]),e.$set(l)},i(a){t||(ae(e.$$.fragment,a),t=!0)},o(a){ne(e.$$.fragment,a),t=!1},d(a){ye(e,a)}}}function ce(u){var i;let e,t=((i=u[5])==null?void 0:i.firstname)+"",a;return{c(){e=c("span"),a=j(t),this.h()},l(l){e=p(l,"SPAN",{class:!0});var n=b(e);a=O(n,t),n.forEach(m),this.h()},h(){r(e,"class","label-text-alt text-error ")},m(l,n){le(l,e,n),s(e,a)},p(l,n){var f;n&32&&t!==(t=((f=l[5])==null?void 0:f.firstname)+"")&&ie(a,t)},d(l){l&&m(e)}}}function pe(u){var i;let e,t=((i=u[5])==null?void 0:i.lastname)+"",a;return{c(){e=c("span"),a=j(t),this.h()},l(l){e=p(l,"SPAN",{class:!0});var n=b(e);a=O(n,t),n.forEach(m),this.h()},h(){r(e,"class","label-text-alt text-error ")},m(l,n){le(l,e,n),s(e,a)},p(l,n){var f;n&32&&t!==(t=((f=l[5])==null?void 0:f.lastname)+"")&&ie(a,t)},d(l){l&&m(e)}}}function de(u){var i;let e,t=((i=u[5])==null?void 0:i.email)+"",a;return{c(){e=c("span"),a=j(t),this.h()},l(l){e=p(l,"SPAN",{class:!0});var n=b(e);a=O(n,t),n.forEach(m),this.h()},h(){r(e,"class","label-text-alt text-error")},m(l,n){le(l,e,n),s(e,a)},p(l,n){var f;n&32&&t!==(t=((f=l[5])==null?void 0:f.email)+"")&&ie(a,t)},d(l){l&&m(e)}}}function Te(u){var x,$,ee;let e,t,a,i,l,n,f,v,q,Y,E,L,F,C,d,g,z,U,k,V,W,S,B,R,D,K,A,I,Z,h=u[3]&&fe(u),y=((x=u[5])==null?void 0:x.firstname)&&ce(u),M=(($=u[5])==null?void 0:$.lastname)&&pe(u),w=((ee=u[5])==null?void 0:ee.email)&&de(u);return{c(){e=c("div"),h&&h.c(),t=N(),a=c("form"),i=c("div"),l=c("label"),n=j("Pr\xE9nom"),f=N(),v=c("input"),q=N(),y&&y.c(),Y=N(),E=c("div"),L=c("label"),F=j("Nom"),C=N(),d=c("input"),g=N(),M&&M.c(),z=N(),U=c("div"),k=c("label"),V=j("Email"),W=N(),S=c("input"),B=N(),w&&w.c(),R=N(),D=c("button"),K=j("Modifier"),this.h()},l(o){e=p(o,"DIV",{class:!0});var _=b(e);h&&h.l(_),t=T(_),a=p(_,"FORM",{class:!0});var P=b(a);i=p(P,"DIV",{class:!0});var H=b(i);l=p(H,"LABEL",{class:!0,for:!0});var te=b(l);n=O(te,"Pr\xE9nom"),te.forEach(m),f=T(H),v=p(H,"INPUT",{type:!0,id:!0,name:!0,placeholder:!0,class:!0}),q=T(H),y&&y.l(H),H.forEach(m),Y=T(P),E=p(P,"DIV",{class:!0});var J=b(E);L=p(J,"LABEL",{class:!0,for:!0});var se=b(L);F=O(se,"Nom"),se.forEach(m),C=T(J),d=p(J,"INPUT",{type:!0,id:!0,name:!0,placeholder:!0,class:!0}),g=T(J),M&&M.l(J),J.forEach(m),z=T(P),U=p(P,"DIV",{class:!0});var G=b(U);k=p(G,"LABEL",{class:!0,for:!0});var ue=b(k);V=O(ue,"Email"),ue.forEach(m),W=T(G),S=p(G,"INPUT",{type:!0,id:!0,name:!0,placeholder:!0,class:!0}),B=T(G),w&&w.l(G),G.forEach(m),R=T(P),D=p(P,"BUTTON",{type:!0,class:!0});var me=b(D);K=O(me,"Modifier"),me.forEach(m),P.forEach(m),_.forEach(m),this.h()},h(){var o,_,P;r(l,"class","label"),r(l,"for","firstname"),r(v,"type","text"),r(v,"id","firstname"),r(v,"name","firstname"),r(v,"placeholder","Pr\xE9nom"),r(v,"class","input bg-neutral w-72 max-w-xs"),Q(v,"input-error",(o=u[5])==null?void 0:o.firstname),r(i,"class","form-control"),r(L,"class","label"),r(L,"for","lastname"),r(d,"type","text"),r(d,"id","lastname"),r(d,"name","lastname"),r(d,"placeholder","Mot de passe"),r(d,"class","input bg-neutral w-72 max-w-xs"),Q(d,"input-error",(_=u[5])==null?void 0:_.lastname),r(E,"class","form-control"),r(k,"class","label"),r(k,"for","email"),r(S,"type","email"),r(S,"id","email"),r(S,"name","email"),r(S,"placeholder","you@domain.com"),r(S,"class","input bg-neutral w-72 max-w-xs"),Q(S,"input-error",(P=u[5])==null?void 0:P.email),r(U,"class","form-control"),r(D,"type","submit"),r(D,"class","btn btn-primary text-base-100 w-32"),Q(D,"loading",u[1]),r(a,"class","flex items-center flex-col gap-8"),r(e,"class","flex items-center flex-col")},m(o,_){le(o,e,_),h&&h.m(e,null),s(e,t),s(e,a),s(a,i),s(i,l),s(l,n),s(i,f),s(i,v),X(v,u[4].firstname),s(i,q),y&&y.m(i,null),s(a,Y),s(a,E),s(E,L),s(L,F),s(E,C),s(E,d),X(d,u[4].lastname),s(E,g),M&&M.m(E,null),s(a,z),s(a,U),s(U,k),s(k,V),s(U,W),s(U,S),X(S,u[4].email),s(U,B),w&&w.m(U,null),s(a,R),s(a,D),s(D,K),A=!0,I||(Z=[re(v,"input",u[7]),re(d,"input",u[8]),re(S,"input",u[9]),re(a,"submit",Me(u[6]))],I=!0)},p(o,[_]){var P,H,te,J,se,G;o[3]?h?(h.p(o,_),_&8&&ae(h,1)):(h=fe(o),h.c(),ae(h,1),h.m(e,t)):h&&(we(),ne(h,1,1,()=>{h=null}),Se()),_&16&&v.value!==o[4].firstname&&X(v,o[4].firstname),(!A||_&32)&&Q(v,"input-error",(P=o[5])==null?void 0:P.firstname),(H=o[5])!=null&&H.firstname?y?y.p(o,_):(y=ce(o),y.c(),y.m(i,null)):y&&(y.d(1),y=null),_&16&&d.value!==o[4].lastname&&X(d,o[4].lastname),(!A||_&32)&&Q(d,"input-error",(te=o[5])==null?void 0:te.lastname),(J=o[5])!=null&&J.lastname?M?M.p(o,_):(M=pe(o),M.c(),M.m(E,null)):M&&(M.d(1),M=null),_&16&&S.value!==o[4].email&&X(S,o[4].email),(!A||_&32)&&Q(S,"input-error",(se=o[5])==null?void 0:se.email),(G=o[5])!=null&&G.email?w?w.p(o,_):(w=de(o),w.c(),w.m(U,null)):w&&(w.d(1),w=null),(!A||_&2)&&Q(D,"loading",o[1])},i(o){A||(ae(h),A=!0)},o(o){ne(h),A=!1},d(o){o&&m(e),h&&h.d(),y&&y.d(),M&&M.d(),w&&w.d(),I=!1,Ae(Z)}}}function Ue(u,e,t){let a="",i=!1,l="error",n=!1,f={},v={};Ie(async()=>{t(1,i=!0);let g=await(await fetch("api/user")).json();g.data?t(4,f=g.data):(t(2,l="error"),t(0,a=g.message),t(3,n=!0)),t(1,i=!1)});const q=Le().shape({email:oe().required(" Email requis").email("Email invalide"),firstname:oe().required(" Pr\xE9nom requis"),lastname:oe().required("Nom requis")}),Y=async()=>{try{await q.validate(f,{abortEarly:!1}),await E(),t(5,v={})}catch(d){t(5,v=d.inner.reduce((g,z)=>({...g,[z.path]:z.message}),{}))}};async function E(){t(3,n=!1),t(1,i=!0);const g=await(await fetch("api/user",{method:"PUT",body:JSON.stringify(f),headers:{"content-type":"application/json"}})).json();g.data?(t(4,f=g.data),t(3,n=!0),t(2,l="success"),t(0,a="Informations modifi\xE9es avec succ\xE8s")):(t(3,n=!0),t(0,a=g.message),t(2,l="error")),t(1,i=!1)}function L(){f.firstname=this.value,t(4,f)}function F(){f.lastname=this.value,t(4,f)}function C(){f.email=this.value,t(4,f)}return[a,i,l,n,f,v,Y,L,F,C]}class ke extends he{constructor(e){super(),_e(this,e,Ue,Te,be,{})}}function qe(u){let e,t,a,i,l,n,f,v,q,Y,E,L,F,C,d,g,z,U,k,V,W,S,B,R,D,K;return q=new ke({}),{c(){e=c("div"),t=c("h1"),a=j("Mon compte"),i=N(),l=c("details"),n=c("summary"),f=j("Informations personnelles"),v=N(),ve(q.$$.fragment),Y=N(),E=c("details"),L=c("summary"),F=j("Mes adresses"),C=N(),d=c("details"),g=c("summary"),z=j("Mes moyens de paiements"),U=N(),k=c("details"),V=c("summary"),W=j("Mon historique de commandes"),S=N(),B=c("form"),R=c("button"),D=j("Se deconnecter"),this.h()},l(A){e=p(A,"DIV",{class:!0});var I=b(e);t=p(I,"H1",{class:!0});var Z=b(t);a=O(Z,"Mon compte"),Z.forEach(m),i=T(I),l=p(I,"DETAILS",{id:!0,class:!0});var h=b(l);n=p(h,"SUMMARY",{class:!0});var y=b(n);f=O(y,"Informations personnelles"),y.forEach(m),v=T(h),Ee(q.$$.fragment,h),h.forEach(m),Y=T(I),E=p(I,"DETAILS",{class:!0});var M=b(E);L=p(M,"SUMMARY",{class:!0});var w=b(L);F=O(w,"Mes adresses"),w.forEach(m),M.forEach(m),C=T(I),d=p(I,"DETAILS",{class:!0});var x=b(d);g=p(x,"SUMMARY",{class:!0});var $=b(g);z=O($,"Mes moyens de paiements"),$.forEach(m),x.forEach(m),U=T(I),k=p(I,"DETAILS",{class:!0});var ee=b(k);V=p(ee,"SUMMARY",{class:!0});var o=b(V);W=O(o,"Mon historique de commandes"),o.forEach(m),ee.forEach(m),S=T(I),B=p(I,"FORM",{class:!0,method:!0});var _=b(B);R=p(_,"BUTTON",{type:!0,class:!0});var P=b(R);D=O(P,"Se deconnecter"),P.forEach(m),_.forEach(m),I.forEach(m),this.h()},h(){r(t,"class","text-6xl text-primary p-4"),r(n,"class","collapse-title text-m font-medium svelte-1j11za4"),r(l,"id","personal-info"),r(l,"class","collapse collapse-arrow bg-base-100 rounded-box"),r(L,"class","collapse-title text-m font-medium svelte-1j11za4"),r(E,"class","collapse collapse-arrow bg-base-100 rounded-box"),r(g,"class","collapse-title text-m font-medium svelte-1j11za4"),r(d,"class","collapse collapse-arrow bg-base-100 rounded-box"),r(V,"class","collapse-title text-m font-medium svelte-1j11za4"),r(k,"class","collapse collapse-arrow bg-base-100 rounded-box"),r(R,"type","submit"),r(R,"class","btn mt-10 btn-neutral text-secondary w-64"),r(B,"class","flex justify-center"),r(B,"method","POST"),r(e,"class","m-10 d-flex")},m(A,I){le(A,e,I),s(e,t),s(t,a),s(e,i),s(e,l),s(l,n),s(n,f),s(l,v),ge(q,l,null),s(e,Y),s(e,E),s(E,L),s(L,F),s(e,C),s(e,d),s(d,g),s(g,z),s(e,U),s(e,k),s(k,V),s(V,W),s(e,S),s(e,B),s(B,R),s(R,D),K=!0},p:Pe,i(A){K||(ae(q.$$.fragment,A),K=!0)},o(A){ne(q.$$.fragment,A),K=!1},d(A){A&&m(e),ye(q)}}}class Oe extends he{constructor(e){super(),_e(this,e,null,qe,be,{})}}export{Oe as default};
